---
title: "React todo 작성과 성능 최적화"
excerpt: "React Todo 프로젝트를 진행하고
성능 최적화 방법에 대해 학습한다"

categories:
  - Blog
tags:
  - [Blog, kakaocloudschool, develop, react, todo]

toc: true
toc_sticky: true

date: 2022-12-08
last_modified_at: 2022-12-09
---

# React ToDo

## 화면 구성

### 패키지 설치

### 투두 메인 페이지

### 데이터 삽입 화면

### 데이터 목록 화면

### 각자 데이터 화면

### 통합

---

## 기능 구현

### 데이터 배열 출력

### 데이터 추가

- App.js 가 아닌 생산성 고려해서 해당 위치에 작성

### 데이터 삭제

- 기본 키로 삭제

### 데이터 수정

---

## 최적화

### 많은 양의 데이터 랜더링

- 함수 호출에 있어서 **호출 구문**을 작성할 경우 `데이터 생성 시마다 리랜더링`
  - **함수 이름**을 대입해야 전부 수행하고 `1번만 리랜더링`

### 컴포넌트가 리랜더링 되는 경우

- 전달받은 `props 가 변경`되는 경우
- 자신의 `state 가 변경`되는 경우
- `상위 컴포넌트가 리랜더링` 되는 경우
- `forceUpdate 함수`를 호출하는 경우

### 하나의 데이터가 수정되면 전체가 리랜더링 되는 문제를 해결

- 많은 데이터일 경우 데이터 수정 발생 시 todos에 변경이 발생하고  
  todos 는 App 컴포넌트의 state 이기 때문에 App이 리랜더링이 되고  
  화면 전체가 리랜더링 되는 문제 발생

`자신의 props 가 변경될 때만 리랜더링`

- Class Component  
  `shouldComponentUpdate 수명주기 메서드`를 활용
- Function Component  
  `Reac.memo 를 이용해 컴포넌트 감싸기`

### 함수 업데이트 자체 방지

- **useCallback**으로 선언한 함수는 `두 번째 매개변수 deps 변경에 따라 재생성`
  - 해당 함수에서 `deps 작성은 필수`
  - 비즈니스 로직 상 todos 변경에 따른 함수 재생성 불필요

#### 1) useState 의 setter 에 `함수형 업데이트 사용`

- state를 수정하는 함수의 매개변수를 함수화

#### 2) useReducer 를 이용해 `함수를 컴포넌트 외부에 생성`

- state 를 수정하는 함수를 컴포넌트 외부로 내보내기
  - `변경할 state 와 action 을 매개변수`로 받아서  
    **action 의 type**을 가지고 분기를 만들어 state에 작업
  - 컴포넌트 내부에서는 useReducer(함수이름, 초기값, 초기화하는 함수)
- 컴포넌트 내부에 `state 수정 함수를 직접 생성하지 않기 때문에  
state 가 변경되더라도 함수 재생성 X`
  - 함수 만드는 작업이 그렇게 많은 자원,메모리를 소모하지 않음

### 화면에 보여질 내용만 랜더링

- 스마트폰 애플리케이션의 Collection View(Table View, Map View, Web View..)  
  메모리 효율을 높이기 위해 **Deque 자료구조**로  
  `화면에 보여지는 만큼만 메모리 할당해 출력`  
  스크롤 시 `Deque 메모리를 재사용`하는 메커니즘으로 메모리 효율 증가

- React도 외부 라이브러리를 통해 동일한 효과를 보여줄 수 있고  
  이는 `SPA 에서 굉장히 중요한 기술`

  - 이 방식이 어려울 경우 서버 랜더링으로 처리

- **react-virtualized 라이브러리**를 통해 `지연 로딩 구현`
  - 하나의 **항목 너비** 와 **높이**를 알아야 하고, **목록의 높이**도 알아야 함
  - react 에서 목록은 스타일에서 width 와 height 설정
