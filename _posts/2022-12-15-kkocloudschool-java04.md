---
title: ""
excerpt: "Java 인스턴스에 대한 학습"

categories:
  - Blog
tags:
  - [Blog, kakaocloudschool, develop, java]

toc: true
toc_sticky: true

date: 2022-12-15
last_modified_at: 2022-12-15
---

...

## 5. 인스턴스 생성

### 생성자 호출

`new 라는 연산자를 이용`해 생성자 호출  
`Heap 영역에 메모리 할당`하고 그 `참조를 리턴`

- 생성자 이외의 메서드를 이용해 만들어진 것은 **디자인 패턴**이 적용
  - 내부적으로 생성자 호출해 리턴
  - 메서드 내부에서 직접 생성해서 리턴  
    `생성자를 호출하지 않고는 인스턴스 생성 불가`
- new를 이용해 생성자 호출 시 참조 리턴
  - 이 참조를 저장하지 않으면 인스턴스 재사용 불가

```java
new 생성자(매개변수) // 인스턴스 생성 구문
클래스이름 참조형변수 = new 생성자(매개변수);
// 인스턴스 생성후 재사용하기 위해 참조 저장
```

- **인스턴스 소멸**  
  인스턴스를 참조하는 변수가 없으면 인스턴스는 메모리 정리 대상이 됌
  ```java
  참조형변수 = null;
  ```
- 정리 대상이 될 수 있는데 다른 참조형 변수가 가리키고 있으면 안되고  
  정리 대상이 되더라도 `바로 소멸되지 않고` 가비지 컬렉션이 나중에 메모리 정리

## 6. 속성이나 메서드 호출

### 클래스이름, 인스턴스이름.속성이름 또는 메서드이름(매개변수 나열)

- **클래스 내부의 메서드** 안에서 자신의 속성이나 메서드 호출시  
  클래스 이름이나 메서드 이름 생략 가능
- entry point 에 해당하는 메서드는 java 클래스 이름만으로 호출

## 7. 클래스 와 인스턴스 만들기

클래스를 만들어 사용할 때는 별도의 파일에 클래스를 만들고  
main 메서드를 소유한 클래스에서 이를 호출해 사용

### 별도의 클래스 생성

### main 메서드로 불러오기

## 8. property(속성)

### 속성

class 나 instance 에 데이터를 저장하기 위해서 생성하는 변수

### 변수의 종류

- Local Variable(지역 변수)  
  함수 나 메서드 안에 만들어져서 자신의 영역 내에서만 사용할 수 있는 변수
- Member Variable(Instance Variable)  
  클래스 안 메서드 외부에 static 이 없이 선언되는 변수

  - Instance 가 각자 소유하는 변수 - 속성이라고도 함

- Static Variable  
  클래스 안 메서드 외부에 static 이라는 키워드와 함께 선언되는 변수
  - Class 가 소유하는 변수

### 속성 선언

```java
[접근 제한자] + [transient] + [volatile] + [static] + [final] 자료형 이름 = 초기값;
```

#### 1. 접근 제한자

- public  
  클래스 내부에서 사용 가능  
  외부(클래스 이름이나 인스턴스 이름)에서도 사용 가능
- package  
  생략, 자신의 패키지에서는 public  
  다른 패키지에서는 private으로 동작
- protected  
  자신의 클래스 내부 와 상속받은 클래스 내부의 메서드에서 사용  
  자신의 패키지 내에서는 public
- private  
  클래스 내부의 메서드에서만 사용 가능

  public > protected > package > private 순

- transient  
  직렬화 대상에서 제외할 때 사용
- volatile  
  이 속성을 사용할 때 복제하지 않고 직접 사용하도록 할 때 사용  
  멀티스레드 환경에서 사용

- static  
  static 속성을 만들 때 사용
- final  
  읽기 전용을 만들 때 사용

- transient, volatile, static, final 은 순서 상관없이 적용

초기값 설정은 생성자나 static 초기화 이용을 권장  
 직접 초기값 설정하는 것은 비추천

속성은 만들어질 때 자동 초기화 수행

- 숫자 데이터는 0, 0.0  
  boolean 데이터는 false  
  나머지 자료형은 null

#### 2. static 속성

속성을 만들 때 앞에 static 을 추가하면 만들어지는 속성

- 클래스가 소유하는 속성
- 외부에서 접근할 수 있도록 만들면 클래스 이름으로 접근 가능  
  자바에서 경고 발생하나 인스턴스로 접근도 가능
- 생성목적  
  `모든 인스턴스가 공유하는 변수를 만들고자 할 때`  
  `전역 변수를 만들고자 할 때`

  - 자바는 클래스 외부에 변수 선언 할 수 없어 전역 변수 생성 불가  
    객체 지향 프로그래밍 자체가 필요한 부분만 외부에 노출
  - 전역 변수를 singleton 패턴으로 디자인해서 사용

- static 초기화  
  클래스 안에 static { } 를 하고 실행되는 코드 작성 시  
  클래스가 메모리에 로드될 때 코드 수행
  - static 변수 와 지역 변수 생성 후 사용 가능은 하나  
    `인스턴스 속성 사용 불가`
  - static 속성에 초기값 부여하고자 할 때 주로 이용  
    프로그램 내에서 맨 처음 한 번만 수행하고자 할 때 주로 이용

#### 3. final 속성

- 변수 앞에 final을 붙이면 읽기 전용

- **지역 변수**에 final 을 붙일거라면 생성하자마자 초기화 필요
- 클래스 안에 만들 때는 대부분 static 과 함께 사용
  - 값을 바꿀 수 없으니 여러 개 생성 불필요하기에
- 클래스 안에 만들 때는 생성하자마자 초기화 가능  
  생성자에서도 초기화 가능하나, 다른 곳 불가능
- 클래스 안에 만들어지는 final은 대부분 클래스 안 메서드의 사용 옵션
  - Java API 에서는 입력 값에 대한 제한을 하고자 할 때 주로 이용
  - 호환성 문제로 인해 enum의 정수 상수를 주로 이용
- 다른 데이터 와의 구별 문제 때문에 이름은 대문자로 사용
  - snake 표기법

### 속성에 대한 접근 지정자

객체 지향에서는 속성을 직접 접근해서 핸들링하는 것을 비추천

- 대부분의 경우 private 이나 protected
- static final은 옵션으로 주로 이용되어 public
- Java API 도큐먼트에는 일반 속성 제외하고 static final 속성만 외부 노출  
  property 라는 용어 대신 field 라는 용어 사용

## 9. Method

### method

전달받은 인수를 처리해서 결과를 돌려주는 작은 프로그램

- function이라고도 하는데, 저장 과 호출이 다름  
  function은 전역 공간에 만들어져 어디서나 호출 가능  
  method는 클래스 안에 만들어져서 클래스 나 인스턴스를 통해 사용

### method 선언

```java
[접근 지정자] + [특성] + 리턴타입(결과형) + 이름(매개변수 나열){
    메서드 내용
}
```

- 접근 지정자는 속성 과 동일
- 특성

  - abstract(추상)  
    내용이 없는 메서드
  - final(종단)  
    overriding 할 수 없는 메서드
  - static
  - synchronized  
    스레드의 임계 영역 처리를 위한 메서드
  - native  
    native 기능(대부분 운영체제 기능 호출) 을 위한 메서드  
    Embedded 나 System Programming 에 이용

- return type(결과형)  
  생략 불가
  - return 데이터 자료형을 기재하나, 없다면 void 설정
- 매개변수는 없으면 생략 가능

### method 호출

- 내부에서는 이름 과 매개변수 만으로 호출 가능
- 외부에서는 클래스 이름 이나 인서턴스 이름을 기재하고  
  .메서드이름(매개변수) 로 호출

### method 원형

```java
리턴타입 메서드이름(매개변수 자료형 나열)
```

### UML 에서의 메서드 표현

```java
이름(매개변수 자료형 나열):리턴 타입
```

### method 사용 이유

- 반복적으로 사용하는 코드를 하나의 이름으로 묶어서  
  이름을 호출하는 것만으로도 코드를 실행
  - 재사용성 증가
- 일반적인 프로그래밍 언어에서의 함수는 한정된 메모리 사용
  - 구조화 필요
  - 함수의 크기를 줄여서 20Line 이내로 작성 권장

### static 메서드 와 instance 메서드 차이

- static 메서드는 외부에서 클래스가 호출
  - 공유 목적
- instance 메서드는 외부에서 인스턴스가 호출
- 메서드는 static(메서드) 영역에 하나만 만들어지고  
  이를 호출해 사용하는 개념으로 코드는 기본적으로 공유
- static 메서드에서는 instance 속성이 안됨
- static 메서드는 인스턴스 생성없이 메서드 호출 가능  
  클래스 기능 구현 후  
  instance 속성을 사용하지 않는 메서드는 static 메서드로 수정

### return

- 메서드의 수행을 종료하고 호출한 곳으로 돌아가는 명령어  
  return 뒤에 있는 문장은 수행되지 않음
- 메서드를 호출하면 메서드를 호출하기 위한 참조 기억  
  메서드의 호출 결과로 하나의 데이터 받을 수 있음
  - return 다음에 돌려줄 데이터 기재
  - 데이터 돌려줄 경우 메서드 이름 앞에 돌려줄 데이터 자료형 기재  
    없다면 void

### parameter, argument

- 메서드를 호출할 때 호출하는 곳에서 넘겨주는 데이터
- 없을 수 있고 개수 제한은 없음
- 여러 개일 경우 순서 기억해야 하므로  
  여러 개를 포함하는 클래스를 만들어 사용을 권장
  - Map 을 사용하는 방법은 비추천  
    가독성이 떨어짐
- 메서드 호출 시 만들어진 매개변수를 생략하거나, 빼거나 더하기가 안됨  
  자료형 과 개수가 맞아야 함
- 매개변수는 메서드 내의 지역 변수  
  메서드 외부에서 사용 불가

### 실습

- 클래스의 메서드를 사용할 때는 static 존재 여부를 확인  
  매개변수의 개수 와 자료형 확인  
  리턴 타입 확인
- 실제 호출 시에는 리턴 타입이 의미 없지만, 사용시에는 확인 필요

### Method Overloading

하나의 클래스 또는 상속 관계에 있는 클래스에  
이름은 같고 매개변수의 개수나 자료형이 다른 메서드가 존재하는 경우

- 메서드를 호출할 때 매개변수의 자료형 과 개수를 보고 호출 메서드 결정
- Overloading 을 판단하는 근거는 메서드 이름 과 매개변수의 순서

### 매개변수 전달

- 기본형은 복제가 되서 전달
- 기본형이 아닌 자료형은 참조가 그대로 전달  
  기본형이 아닌 데이터 넘겨받아 내부 요소 수정시  
  넘겨준 데이터가 수정됨
- 기본형 전달은 Call By Value, 참조형 전달은 Call By Reference
- return 을 하지 않는 메서드가 참조형을 매개변수로 받으면 대부분 매개변수 수정

### this

- 인스턴스 메서드의 숨겨진 첫번째 매개변수  
  static 메서드에는 this 가 없음
  ```java
  class T{
    private int num;
    public void method(){
        System.out.println(num);
    }
  }
  ```
- 속성은 인스턴스가 소유하지만 메서드는 공유

  ```java
  T obj = new T();
  obj.num = 10;
  obj.method(); //10

  T 클래스에 대한 정의 >> obj(num, T에 대한 참조 소유)

  obj.num =10;
  obj.method() // 메서드 호출하면 클래스에 가서 찾음
  ```

- 클래스 생성 시 코드 수정됨

  ```java
  class T{
    private int num;
    public void method(T this){ // static이 안 붙어있는 경우
    int x = 20;
    //num은 메서드 안 지역변수가 아니므로 this 추가
        System.out.println(this.num);
        System.out.println(x);
    }
  }

  T obj = new T();
  obj.num = 10;
  obj.method(); >> T.method(obj);
  ```

- this 사용하는 경우  
  인스턴스 속성 과 메서드 내부에서 만든 지역변수 이름이 같은 경우  
  변수 이름만 사용하면 scope 법칙으로 지역 변수 호출  
  이 때 지역 변수가 아닌 인스턴스 속성 참고할 때 this.속성이름
  - this.이 붙으면 메서드 내 지역 변수는 찾지 않음

### 접근자 메서드

- 객체 지향 언어에서는 속성에 바로 접근하는 것을 권장하지 않음  
  속성에 접근해서 읽어오고 수정하는 메서드 이용을 권장
  - 이 메서드를 접근자 메서드라고 함
- getter 메서드  
  속성의 값을 리턴하는 메서드

  - 메서드의 이름은 get속성이름 으로 하는데 첫글자만 대문자로 변경
  - 메서드의 내용은 속성의 값을 리턴하는 일만
  - 메서드 변경할 경우는 자료형이 boolean이고, get 대신 is로 작성
  - get 할 때 생성을 해서 리턴하는 경우 지연 생성
    - 대부분 생성자에서 미리 생성하고 사용하나  
      메모리 부담, 생성 속도가 느리면 get/set에 생성하기도 함

- setter 메서드  
  속성의 값을 설정하는 메서드
  - 메서드 이름은 set속성이름, 속성이름 첫글자만 대문자로 작성
  - 매개변수로 데이터를 1개 받아서 이를 속성에 대입하는 역할
  - return 타입은 void가 일반적
  - 속성에 값을 대입하기 전 유효성 검사를 수행해  
    정상적인 값만 사용하게 코드를 추가하는 경우도 있음
    - 0~100 사이인 점수 설정에서 int가 조건을 넘을 수도 있어서

`대부분의 경우 IDE가 제공하는 기능을 이용하거나 Lombok 라이브러리를 이용해  
getter setter 어노테이션으로 생성`

- 여러 개의 값을 하나로 묶기 위해서 사용하는 클래스 VO(Value Object)  
  영역을 벗어나서 사용되면 DTO(Data Transfer Object)  
  데이터베이스와 연동이 되면 Entity
- setter는 없고 getter만 존재하는 경우  
  읽기 전용이거나 derived 속성
  - 파생 속성 - 다른 속성으로부터 유도된 속성

### recursion(재귀호출)

- 메서드가 자기 자신을 다시 호출해서 리턴하는 것
- 코드를 이해하기 쉽게 작성하기 위해서 사용
- 메서드가 자기 자신을 다시 호출해 메모리 사용량 증가  
  수행 속도가 오래걸리게 됨
- 재귀 호출을 이용할 수 있는 대표적인 알고리즘이  
  합계, 팩토리얼, 피보나치 수열, 하노이의 탑 등
- 재귀로 메서드 생성 시 종료 지점 만들어주어야 함  
  무한 루프 방지
  ```java
  public 리턴타입 이름(매개변수){
    if(종료 조건){
        return 값;
    }else{
        return 재귀 호출 구문;
    }
  }
  ```

### varargs(Variable Arguments)

- 매개변수의 개수를 가변으로 설정하는 것
- 매개변수를 설정할 때 ... 이름 을 사용하게 되면 메서드 호출 시  
  몇 개의 데이터를 대입하더라도 이름의 배열로 묶어서 처리
- 매개변수 중에서 맨 마지막에 1번만 사용 가능
  - 중간에 포함되거나 여러 번 사용 시 어디까지 배열에 대입 어려움
- 이름은 [ ] 가 없어도 배열로 처리
  - System.out.printf 메서드가 대표적인 예

### 메서드 사용

- 클래스의 메서드를 사용하고자 할 때는 static의 여부 확인  
  매개변수를 확인  
  return 타입 확인 후
  (예외 처리의 강제 여부 확인)
